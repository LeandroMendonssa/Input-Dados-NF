<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Relação de Notas Fiscais</title>

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Minhas Notas">
  <link rel="apple-touch-icon" href="favicon.png">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <header class="top-header">
    <div class="left-icons">
      <button id="fornecedores-btn" onclick="openPopup('fornecedores-popup')" title="Fornecedores"><i class="fas fa-truck"></i></button>
      <button id="pedidos-btn" onclick="openPopup('pedidos-popup')" title="Pedidos"><i class="fas fa-box"></i></button>
      <button id="historico-btn" onclick="openPopup('historico-popup')" title="Histórico"><i class="fas fa-history"></i></button>
      <button id="gerenciar-btn-top" onclick="openPopup('gerenciar-notas-popup')" title="Gerenciar Notas"><i class="fas fa-list-check"></i></button>
    </div>
    <div class="right-icons">
      <button id="theme-toggle" onclick="toggleTheme()" title="Alternar tema"><i class="fas fa-moon"></i></button>
    </div>
  </header>
  
  <div class="wrap">
    <h1>Relação de Notas Fiscais</h1>

    <div class="card">
      <div class="campo">
        <label for="data">Data</label>
        <div class="data-container">
          <input type="text" id="data" placeholder="dd/mm/aaaa" maxlength="10" inputmode="numeric" />
        </div>
      </div>

      <div class="campo">
        <label for="nf">NF</label>
        <input type="text" id="nf" inputmode="numeric" placeholder="Número da Nota Fiscal" autocomplete="off" />
      </div>

      <div class="campo">
        <label for="venc">Vencimento</label>
        <div class="data-container">
          <input type="text" id="venc" placeholder="dd/mm/aaaa" maxlength="10" inputmode="numeric" />
        </div>
      </div>

      <div class="campo">
        <label for="valor">Valor Total</label>
        <input id="valor" type="text" inputmode="decimal" pattern="[0-9.,]*" placeholder="Ex.: 1.200,50" />
      </div>

      <div class="campo">
        <label for="forn">Nome do Fornecedor</label>
        <input type="text" id="forn" placeholder="Nome do fornecedor" autocomplete="off" list="fornecedores-sugeridos" />
        <datalist id="fornecedores-sugeridos"></datalist>
      </div>

      <div class="campo">
        <label for="obs">Observações</label>
        <select id="obs">
          <option value="">Recurso a ser pago</option>
          <option value="C/C CTI">C/C CTI</option>
          <option value="C/C SANTA CASA">C/C SANTA CASA</option>
          <option value="Recurso Proprio Santa Casa">Recurso Proprio Santa Casa</option>
          <option value="Recurso Proprio CTI">Recurso Proprio CTI</option>
          <option value="PAGO">PAGO</option>
        </select>
      </div>
      
      <div class="campo">
        <label for="fotos">Anexar Imagens</label>
        <label for="fotos" class="file-input-label">
          <i class="fas fa-camera"></i> Selecionar Imagens
        </label>
        <input type="file" id="fotos" multiple accept="image/*" />
        <div class="status-container">
            <span class="hint" id="fileCountHint">Nenhuma imagem acumulada.</span>
        </div>
        <div id="miniaturas-container"></div>
      </div>

      <div class="actions">
        <button id="salvarBtn" onclick="salvarNota()"><i class="fas fa-check"></i> Salvar</button>
        <button id="exportBtn" onclick="exportar()"><i class="fas fa-clipboard"></i> Copiar</button>
        <button id="limparBtn" onclick="limpar()"><i class="fas fa-trash"></i> Limpar</button>
        <button id="gerenciarBtn" class="full-width" onclick="openPopup('gerenciar-notas-popup')"><i class="fas fa-list-check"></i> Gerenciar Notas</button>
      </div>

      <textarea id="saida" readonly placeholder="O texto para sua planilha aparecerá aqui..."></textarea>
    </div>

    <footer>
      <span>— Desenvolvido por <b>Leandro Mendonça</b> —</span>
    </footer>
  </div>
  
  <div id="gerenciar-notas-popup" class="popup-modal">
    <div class="popup-content">
      <div class="popup-header">
        <h2>Gerenciar Notas</h2>
        <span class="close-popup" onclick="closePopup('gerenciar-notas-popup')">&times;</span>
      </div>
      <div class="menu-section">
        <ul id="lista-notas-pendentes"></ul>
        <div class="paginacao" id="paginacao-notas"></div>
      </div>
    </div>
  </div>

  <div id="historico-popup" class="popup-modal">
    <div class="popup-content">
      <div class="popup-header">
        <h2>Histórico</h2>
        <span class="close-popup" onclick="closePopup('historico-popup')">&times;</span>
      </div>
      <div class="menu-section">
        <ul id="lista-historico" class="menu-list"></ul>
        <div class="paginacao" id="paginacao-historico"></div>
        <div class="btn-list">
          <button class="destructive" onclick="limparHistorico()"><i class="fas fa-trash-alt"></i> Limpar Histórico</button>
        </div>
      </div>
    </div>
  </div>

  <div id="pedidos-popup" class="popup-modal">
    <div class="popup-content">
      <div class="popup-header">
        <h2>Pedidos & Recursos</h2>
        <span class="close-popup" onclick="closePopup('pedidos-popup')">&times;</span>
      </div>
      <div class="menu-section">
        <div class="pedido-container">
          <input type="text" id="pedido-num" placeholder="Nº do Pedido" autocomplete="off">
          <select id="pedido-recurso">
            <option value="">Recurso...</option>
            <option value="Santa Casa">Santa Casa</option>
            <option value="CTI">CTI</option>
          </select>
        </div>
        <button class="actions-button" style="background: var(--button-primary); color: white; width: 100%; border: none; padding: 12px; border-radius: var(--radius);" onclick="adicionarPedido()"><i class="fas fa-plus"></i> Adicionar Pedido</button>
        <ul id="lista-pedidos"></ul>
      </div>
    </div>
  </div>
  
  <div id="fornecedores-popup" class="popup-modal">
    <div class="popup-content">
      <div class="popup-header">
        <h2>Fornecedores</h2>
        <span class="close-popup" onclick="closePopup('fornecedores-popup')">&times;</span>
      </div>
      <div class="menu-section">
        <h3 class="manage-section-title">Adicionar Novo Fornecedor</h3>
        <div class="fornecedor-input-group">
          <input type="text" id="forn-manage" placeholder="Nome do fornecedor">
          <button class="actions-button" style="background: var(--button-primary); color: white; border: none; padding: 10px 15px; border-radius: 8px;" onclick="adicionarFornecedorManage()"><i class="fas fa-plus"></i></button>
        </div>
        <ul id="lista-fornecedores-manage"></ul>
      </div>
    </div>
  </div>
  
  <div id="modalPreview" class="modal-preview">
    <span class="modal-preview-fechar" onclick="fecharPreview()">&times;</span>
    <img class="modal-preview-conteudo" id="imgPreview">
    <div class="modal-preview-nav">
        <button id="prevBtn" onclick="navegarFotos(-1)"><i class="fas fa-chevron-left"></i></button>
        <button id="nextBtn" onclick="navegarFotos(1)"><i class="fas fa-chevron-right"></i></button>
    </div>
    <button class="modal-preview-delete" onclick="excluirFotoPreview()">
        <i class="fas fa-trash-alt"></i> Excluir
    </button>
  </div>

  <div id="toast" class="toast">✅ Linhas copiadas! Agora é só colar no Excel.</div>

  <script src="script.js"></script>
</body>
</html>
