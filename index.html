<!DOCTYPE html>
<html lang="pt-BR" data-font="sans" style="--app-height: 100vh; --transition-duration: 0.35s;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Minhas Notas</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Minhas Notas">
    <link rel="apple-touch-icon" href="favicon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Slab:wght@400;700&family=Source+Code+Pro:wght@400;600&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>

<body class="is-loading" data-theme="light" data-icon-theme="solid">

    <div id="login-screen" class="auth-screen">
        <div class="login-box">
            <div class="icon"><i class="fas fa-lock" id="login-icon"></i></div>
            <h1>Acesso Restrito</h1>
            <p>Por favor, insira a senha para continuar.</p>
            <input type="password" id="password-input" placeholder="••••••••" autocomplete="current-password">
            <div id="error-message" class="error-message"></div>
            <button id="login-button" class="actions-button">Entrar</button>
        </div>
    </div>

    <div id="security-check-screen" class="auth-screen">
        <div class="login-box">
            <div class="icon"><i class="fas fa-shield-alt"></i></div>
            <h1>Verificação de Segurança</h1>
            <p>Por favor, digite sua senha atual para prosseguir.</p>
            <input type="password" id="security-check-password-input" placeholder="••••••••" autocomplete="current-password">
            <div id="security-check-error-message" class="error-message"></div>
            <div class="actions" style="grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 24px;">
                <button id="cancel-security-check-btn" class="actions-button" style="background-color: var(--text-light);">Cancelar</button>
                <button id="handle-security-check-btn" class="actions-button" style="background-color: var(--accent-color);">Verificar</button>
            </div>
        </div>
    </div>
    
    <div id="password-change-screen" class="auth-screen">
        <div class="login-box">
            <div class="icon"><i class="fas fa-key"></i></div>
            <h1>Alterar Senha</h1>
            <p>Crie uma nova senha para sua conta.</p>
            <input type="password" id="new-password-input" placeholder="Nova Senha" autocomplete="new-password">
            <input type="password" id="confirm-password-input" placeholder="Confirmar Senha" style="margin-top: 16px;" autocomplete="new-password">
            <div id="password-error-message" class="error-message"></div>
            <div class="actions" style="grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 24px;">
                <button id="close-password-change-btn" class="actions-button" style="background-color: var(--text-light);">Cancelar</button>
                <button id="save-new-password-btn" class="actions-button" style="background-color: var(--accent-color);">Salvar</button>
            </div>
        </div>
    </div>

    <div class="app-container" id="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">Minhas Notas</div>
            <ul id="sidebar-nav" class="sidebar-nav"></ul>
        </nav>
        
        <div class="main-content">
            <header class="header">
                <h1 id="main-header-title" class="header-title">Adicionar</h1>
                <div class="header-actions">
                    <button class="header-action" id="sync-btn" style="display: flex;">
                        <span class="icon-wrapper">
                            <i class="fa-solid fa-sync-alt"></i><span class="material-icons">sync</span>
                            <svg class="icon-svg-outline" viewBox="0 0 24 24"><path d="M21.5 2v6h-6M2.5 22v-6h6"></path><path d="M22 11.5A10 10 0 0 1 3.2 7.2M2 12.5a10 10 0 0 1 18.8 4.2"></path></svg>
                            <svg class="icon-svg-duotone" viewBox="0 0 24 24"><path opacity="0.4" d="M21.5 2v6h-6L21.5 2zM8.5 22v-6h-6L8.5 22z"></path><path d="M22 11.5A10 10 0 0 1 3.2 7.2M2 12.5a10 10 0 0 1 18.8 4.2"></path></svg>
                        </span>
                    </button>
                    <button class="header-action" id="close-btn" style="display: none;">
                        <span class="icon-wrapper">
                            <i class="fa-solid fa-times"></i><span class="material-icons">close</span>
                            <svg class="icon-svg-outline" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            <svg class="icon-svg-duotone" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.364 7.05025C18.7565 6.65772 18.7565 6.02455 18.364 5.63203C17.9714 5.2395 17.3383 5.2395 16.9458 5.63203L12 10.5778L7.05421 5.63203C6.66169 5.2395 6.02852 5.2395 5.63599 5.63203C5.24347 6.02455 5.24347 6.65772 5.63599 7.05025L10.5818 12L5.63599 16.9458C5.24347 17.3383 5.24347 17.9715 5.63599 18.364C6.02852 18.7565 6.66169 18.7565 7.05421 18.364L12 13.4182L16.9458 18.364C17.3383 18.7565 17.9714 18.7565 18.364 18.364C18.7565 17.9715 18.7565 17.3383 18.364 16.9458L13.4182 12L18.364 7.05025Z"></path></svg>
                        </span>
                    </button>
                </div>
            </header>

            <div class="screen-wrapper">
                <div class="app-screen active" id="screen-add">
                    </div>
                <div class="app-screen" id="screen-manage">
                    <div id="lista-notas-pendentes" class="nota-list"></div>
                </div>
                <div class="app-screen" id="screen-export">
                    </div>
                <div class="app-screen" id="screen-history">
                    <div id="lista-historico" class="nota-list"></div>
                    <div id="historico-actions" class="actions" style="display: none; margin-top: 24px;">
                        <button id="limpar-historico-btn" class="actions-button" style="background-color: var(--button-danger);">
                            Limpar Histórico
                        </button>
                    </div>
                </div>
                <div class="app-screen" id="screen-settings">
                    </div>
                <div class="app-screen" id="screen-fornecedores">
                    </div>
                <div class="app-screen" id="screen-pedidos">
                    </div>
                <div class="app-screen" id="screen-observacoes">
                    </div>
                <div class="app-screen" id="screen-personalizacao">
                    </div>
                <div class="app-screen" id="screen-anotacoes">
                    </div>
            </div>
        </div>
        
        <nav id="tab-bar" class="tab-bar"></nav>
    </div>

    <div id="confirm-modal" class="modal-screen">
        <div class="modal-content">
            <h2 id="confirm-title"></h2>
            <p id="confirm-message"></p>
            <div class="confirm-actions">
                <button id="cancel-btn" class="actions-button" style="background-color: var(--text-light);">Cancelar</button>
                <button id="confirm-btn" class="actions-button">Confirmar</button>
            </div>
        </div>
    </div>
    
    <div id="modalPreview" class="modal-preview">
        <button id="fechar-preview-btn" class="modal-preview-fechar">&times;</button>
        <img class="modal-preview-conteudo" id="imgPreview" alt="Pré-visualização da imagem">
        <div class="modal-preview-nav">
            <button id="prevBtn"><i class="fa-solid fa-chevron-left"></i></button>
            <button id="nextBtn"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
        <div class="modal-preview-bottom">
            <button id="salvar-foto-preview-btn" class="modal-preview-action"><i class="fa-solid fa-download"></i> Salvar</button>
            <button id="excluir-foto-preview-btn" class="modal-preview-action delete"><i class="fa-solid fa-trash-alt"></i> Excluir</button>
        </div>
    </div>
    
    <div id="toast" class="toast"></div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="script.js" defer></script>
</body>
</html>
