:root {
    /* Font Variables */
    --font-sans: 'Inter', sans-serif;
    --font-serif: 'Roboto Slab', serif;
    --font-mono: 'Source Code Pro', monospace;
    --font-montserrat: 'Montserrat', sans-serif;

    /* Tema Padrão (Claro) */
    --bg-primary: #f0f2f5;
    --bg-secondary: #ffffff;
    --bg-tertiary: #e9ecef;
    --text-dark: #1d1d1f;
    --text-light: #6e6e73;
    --border-color: #dcdcdc;
    --accent-color: #007aff;
    --accent-color-hover: #0056b3;
    --button-success: #34c759;
    --button-danger: #ff3b30;
    --button-whatsapp: #25d366;
    --radius: 16px;
    --shadow: rgba(0, 0, 0, 0.05);
    --app-height: 100vh;
    --transition-duration: 0.35s;
}

/* Tema Escuro */
body[data-theme="dark"] {
    --bg-primary: #000000;
    --bg-secondary: #1c1c1e;
    --bg-tertiary: #2c2c2e;
    --text-dark: #ffffff;
    --text-light: #8e8e93;
    --border-color: #3a3a3c;
    --shadow: rgba(255, 255, 255, 0.08);
}

/* Temas Coloridos */
body[data-theme="ocean"] {
    --bg-primary: #e0f7fa;
    --bg-secondary: #ffffff;
    --bg-tertiary: #e0f2f1;
    --text-dark: #004d40;
    --text-light: #00796b;
    --border-color: #b2dfdb;
    --accent-color: #26c6da;
}
body[data-theme="sunset"] {
    --bg-primary: #fff3e0;
    --bg-secondary: #ffffff;
    --bg-tertiary: #fff8e1;
    --text-dark: #4e342e;
    --text-light: #795548;
    --border-color: #ffccbc;
    --accent-color: #ff7043;
}
body[data-theme="forest"] {
    --bg-primary: #f1f8e9;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f9fbe7;
    --text-dark: #33691e;
    --text-light: #558b2f;
    --border-color: #dcedc8;
    --accent-color: #9ccc65;
}
body[data-theme="plum"] {
    --bg-primary: #f3e5f5;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f3e5f5;
    --text-dark: #4a148c;
    --text-light: #6a1b9a;
    --border-color: #e1bee7;
    --accent-color: #ab47bc;
}
body[data-theme="wine"] {
    --bg-primary: #4c1d2e;
    --bg-secondary: #5c2a3e;
    --bg-tertiary: #6b374e;
    --text-dark: #fcefee;
    --text-light: #e0c5d0;
    --border-color: #7a445d;
    --accent-color: #e75480;
}

/* Estilos de Fonte */
html[data-font="sans"] body { font-family: var(--font-sans); }
html[data-font="serif"] body { font-family: var(--font-serif); }
html[data-font="mono"] body { font-family: var(--font-mono); }
html[data-font="montserrat"] body { font-family: var(--font-montserrat); }

/* Lógica de Ícones */
.icon-wrapper > * { display: none; }
.icon-wrapper .icon-svg-outline, .icon-wrapper .icon-svg-duotone {
    width: 1em; height: 1em; vertical-align: -0.15em;
}
body:not([data-icon-theme]) .icon-wrapper [class*="fa-"],
body[data-icon-theme="solid"] .icon-wrapper [class*="fa-"] { display: inline-block; }
body[data-icon-theme="material"] .icon-wrapper .material-icons { display: inline-block; font-size: 22px; }
body[data-icon-theme="outline"] .icon-wrapper .icon-svg-outline { display: inline-block; }
body[data-icon-theme="duotone"] .icon-wrapper .icon-svg-duotone { display: inline-block; }

/* Estilos Globais e Reset */
* { box-sizing: border-box; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; }
body.is-loading { opacity: 0; transition: none; }
html, body { height: 100%; margin: 0; overflow: hidden; background-color: var(--bg-primary); color: var(--text-dark); -webkit-user-select: none; user-select: none; }
body { transition: opacity 0.3s, background-color var(--transition-duration), color var(--transition-duration); }
.card, .app-screen, .header, .tab-bar, .settings-list-group, .nota-item, .actions-button {
    transition: background-color var(--transition-duration), color var(--transition-duration), border-color var(--transition-duration);
}
input, select, textarea, button {
    font-family: inherit;
    transition: background-color var(--transition-duration), color var(--transition-duration), border-color var(--transition-duration), box-shadow 0.2s;
}

/* Layout Principal */
.app-container { position: relative; width: 100%; height: var(--app-height); max-width: 680px; margin: 0 auto; background-color: var(--bg-primary); overflow: hidden; display: none; flex-direction: column; }
.main-content { flex-grow: 1; position: relative; overflow: hidden; display: flex; flex-direction: column; }
.screen-wrapper { flex-grow: 1; position: relative; overflow: hidden; }
.app-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-primary); visibility: hidden; transition: transform var(--transition-duration) cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear var(--transition-duration); z-index: 1; display: flex; flex-direction: column; transform: translateY(20px); padding: 24px; overflow-y: auto; }
.app-screen.active { visibility: visible; z-index: 2; transform: translateY(0); transition: transform var(--transition-duration) cubic-bezier(0.4, 0, 0.2, 1); }

/* Header */
.header { padding: 16px 24px; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; background-color: var(--bg-secondary); border-bottom: 1px solid var(--border-color); box-shadow: 0 1px 2px var(--shadow); position: relative; z-index: 10; }
.header-title { font-size: 28px; font-weight: 700; color: var(--text-dark); margin: 0; opacity: 1; transform: translateY(0); transition: opacity var(--transition-duration), transform var(--transition-duration); }
.header-title.title-changing { opacity: 0; transform: translateY(-5px); }
.header-action { background: none; border: none; color: var(--text-light); font-size: 20px; cursor: pointer; padding: 8px; display: flex; align-items: center; gap: 8px; }

/* Tab Bar (Mobile) */
.tab-bar { z-index: 1001; display: flex; justify-content: space-around; align-items: center; background-color: rgba(255, 255, 255, 0.85); -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); border-top: 1px solid var(--border-color); padding: 8px 0; flex-shrink: 0; padding-bottom: env(safe-area-inset-bottom); }
body[data-theme] .tab-bar { background-color: color-mix(in srgb, var(--bg-secondary) 85%, transparent); border-top-color: var(--border-color); }
body[data-theme="dark"] .tab-bar { background-color: rgba(28, 28, 30, 0.85); }
.tab-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-light); font-size: 10px; font-weight: 500; cursor: pointer; border: none; background: none; padding: 4px 6px; flex: 1; max-width: 16.66%; transition: color 0.2s; }
.tab-item .icon-wrapper { font-size: 20px; }
.tab-item.active { color: var(--accent-color) !important; }

/* Componentes Comuns */
.card { background: var(--bg-secondary); border-radius: var(--radius); padding: 24px; border: 1px solid var(--border-color); }
.campo, .modal-campo { margin-bottom: 18px; }
label { display: block; font-size: 13px; color: var(--text-light); margin: 0 0 8px; font-weight: 500; }
input, select, textarea { width: 100%; padding: 14px 16px; border: 1px solid var(--border-color); border-radius: var(--radius); font-size: 15px; background: var(--bg-tertiary); color: var(--text-dark); }
select option { background-color: var(--bg-secondary); color: var(--text-dark); }
input:focus, select:focus, textarea:focus { border-color: var(--accent-color); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 20%, transparent); outline: 0; }
.file-input-label { display: flex; align-items: center; justify-content: center; padding: 14px; border: 2px dashed var(--accent-color); border-radius: var(--radius); background: transparent; cursor: pointer; color: var(--accent-color); text-align: center; gap: 8px; font-weight: 600; transition: all 0.2s ease-in-out; }
.file-input-label:hover { background-color: color-mix(in srgb, var(--accent-color) 10%, transparent); border-style: solid; }

/* Slider (Personalização) */
#animation-speed-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: var(--bg-primary); border-radius: 4px; outline: none; }
#animation-speed-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--accent-color); border-radius: 50%; cursor: pointer; transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
#animation-speed-slider::-webkit-slider-thumb:active { transform: scale(1.2); }
#animation-speed-slider::-moz-range-thumb { width: 20px; height: 20px; background: var(--accent-color); border-radius: 50%; cursor: pointer; border: none; transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
#animation-speed-slider::-moz-range-thumb:active { transform: scale(1.2); }
#animation-speed-label { display: flex; justify-content: space-between; align-items: center; }
#animation-speed-value { font-weight: 600; color: var(--text-dark); background-color: var(--bg-primary); padding: 2px 8px; border-radius: 6px; font-size: 12px; }

/* Lista Reordenável (Personalização) */
.reorder-list { list-style: none; padding: 0; margin: 0; border: 1px solid var(--border-color); border-radius: var(--radius); overflow: hidden; }
.reorder-list-item { padding: 10px 16px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; justify-content: space-between; background-color: var(--bg-secondary); }
.reorder-list-item:last-child { border-bottom: none; }
.reorder-list-item .name { display: flex; align-items: center; gap: 16px; font-weight: 500; }
.reorder-list-item .actions button { background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-light); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; }
.reorder-list-item .actions button:disabled { opacity: 0.3; cursor: not-allowed; }
.reorder-list-item .actions button:active { background: var(--accent-color); color: white; }

/* Tela de Anotações (Ajuste para teclado) */
#screen-anotacoes { display: flex; flex-direction: column; gap: 16px; padding-bottom: calc(24px + env(safe-area-inset-bottom)); transition: padding-bottom 0.2s ease-out; }
#anotacoes-textarea { flex-grow: 1; height: 100%; resize: none; font-size: 16px; line-height: 1.6; padding: 20px; }
.anotacoes-actions { display: flex; justify-content: center; gap: 10px; flex-shrink: 0; }
.anotacoes-actions .actions-button { padding: 10px 16px; font-size: 14px; width: auto; flex-grow: 0; }

/* Ícones SVG */
.check-svg-icon { width: 1em; height: 1em; vertical-align: -0.15em; fill: currentColor; margin-right: 8px; }
.sent-btn .check-svg-icon { margin-right: 0; }
.fotos-enviadas-status .check-svg-icon { color: var(--button-success); }

/* Telas de Autenticação */
.auth-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-primary); z-index: 9999; align-items: center; justify-content: center; flex-direction: column; padding: 24px; }
.login-box { width: 100%; max-width: 320px; text-align: center; }
.login-box .icon { font-size: 48px; color: var(--text-light); margin-bottom: 24px; transition: color .4s ease, transform .4s ease; }
.login-box .icon.unlocked { color: var(--button-success); transform: rotate(-10deg); }
.login-box h1 { font-size: 24px; color: var(--text-dark); margin-bottom: 8px; font-weight: 700; }
.login-box p { font-size: 16px; color: var(--text-light); margin-bottom: 24px; }
.login-box input { text-align: center; font-size: 18px; }
.login-box button { margin-top: 16px; background-color: var(--accent-color); }
.login-box .error-message { color: var(--button-danger); font-size: 14px; height: 20px; margin-top: 8px; }
.shake { animation: shake .82s cubic-bezier(.36,.07,.19,.97) both; }

/* Modais */
.modal-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; display: none; align-items: center; justify-content: center; background-color: rgba(0,0,0,.4); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); }
#confirm-modal { z-index: 10001; }
.modal-screen.active { display: flex; }
.modal-content { background-color: var(--bg-secondary); display: flex; flex-direction: column; border-radius: var(--radius); width: 100%; max-width: 680px; height: 100%; transform: translateY(20px); transition: transform var(--transition-duration) cubic-bezier(0.4,0,0.2,1); }
.modal-screen.active .modal-content { transform: translateY(0); }

/* Animações */
@keyframes sync-success { 0% { color: var(--text-light); } 50% { color: var(--button-success); transform: scale(1.2); } 100% { color: var(--text-light); transform: scale(1); } }
.sync-success { animation: sync-success .8s ease-in-out; }
@keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
@keyframes toastIn { from { opacity: 0; transform: translate(-50%, 20px); } to { opacity: 1; transform: translate(-50%, 0); } }
@keyframes fa-spin { 0% { transform: rotate(0); } 100% { transform: rotate(360deg); } }
.fa-spin { animation: fa-spin 1s infinite linear; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes highlight-fade { from { background-color: rgba(0, 122, 255, .2); } to { background-color: transparent; } }
.highlight-update { animation: highlight-fade 1.5s ease; }

/* Tela de Ajustes */
.settings-list-group { list-style: none; padding: 0; margin: 0; background-color: var(--bg-secondary); border-radius: var(--radius); border: 1px solid var(--border-color); overflow: hidden; }
.settings-list-group:not(:first-child) { margin-top: 32px; }
.settings-list-group li { border-bottom: 1px solid var(--border-color); }
.settings-list-group li:last-child { border-bottom: none; }
.settings-list-group a { display: flex; align-items: center; padding: 14px 16px; text-decoration: none; color: var(--text-dark); font-weight: 500; cursor: pointer; }
.settings-list-group a:active { background-color: color-mix(in srgb, var(--text-dark) 5%, transparent); }
.settings-list-group .icon { width: 32px; height: 32px; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; color: #fff; font-size: 16px; margin-right: 16px; flex-shrink: 0; }
.settings-list-group .fa-chevron-right { margin-left: auto; color: var(--text-light); opacity: .5; }

/* Gerenciamento de Fornecedores/Observações */
#forn, .fornEdit { text-transform: uppercase; }
.manage-list { margin-top: 24px; list-style: none; padding: 0; }
.manage-list li { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-color); font-weight: 500; }
.manage-list li:last-child { border-bottom: none; }
.manage-list button { background: none; border: none; color: var(--button-danger); cursor: pointer; font-size: 16px; opacity: 0.7; }
.manage-list button:hover { opacity: 1; }

/* Anexos de Fotos */
.anexo-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
#fotos, #cameraInput, .edit-file-input { display: none; }
#miniaturas-container, .miniaturas-container-edit { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; align-items: center; }
.miniatura-wrapper { position: relative; }
.miniatura-wrapper img { width: 64px; height: 64px; object-fit: cover; border-radius: 8px; border: 1px solid var(--border-color); cursor: pointer; }
.miniatura-wrapper .not-found { width: 64px; height: 64px; border-radius: 8px; border: 1px dashed var(--border-color); display: flex; align-items: center; justify-content: center; font-size: 28px; color: var(--text-light); background: var(--bg-primary); }
.remove-foto { position: absolute; top: -8px; right: -8px; background: var(--button-danger); color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; cursor: pointer; border: none; }

/* Lista de Notas */
.nota-list { list-style: none; padding: 0; margin: 0; }
.nota-item { background-color: var(--bg-secondary); border-radius: var(--radius); padding: 16px; border: 1px solid var(--border-color); margin-bottom: 16px; }
.nota-item.nota-enviada .nota-info { color: var(--button-success); }
.nota-info { font-weight: 600; font-size: 16px; color: var(--text-dark); margin-bottom: 4px; }
.nota-data, .nota-detalhes { font-size: 13px; color: var(--text-light); margin-bottom: 8px; }
.actions-row { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-top: 16px; }
.actions-row .actions-group { display: flex; gap: 8px; align-items: center; }
.actions-row button { border: .5px solid var(--border-color); height: 38px; padding: 0 12px; border-radius: 8px; background: var(--bg-primary); color: var(--text-dark); font-size: 13px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; }
.actions-row .icon-only { width: 38px; padding: 0; justify-content: center; font-size: 16px; }
.actions-row .whatsapp-btn, .actions-row .sent-btn { background: var(--button-whatsapp); color: #fff; border: none; }
.actions-row .sent-btn { background: var(--button-success); }
.actions-row .edit-btn { color: var(--accent-color); }
.actions-row .delete-btn { color: var(--button-danger); }
.sem-fotos { font-size: 12px; color: var(--text-light); padding: 4px 8px; background: var(--bg-primary); border-radius: 6px; font-weight: 500; }
.edit-panel, .checklist-container { overflow: hidden; max-height: 0; transition: max-height var(--transition-duration) ease-in-out, padding-top var(--transition-duration) ease-in-out, margin-top var(--transition-duration) ease-in-out; padding-top: 0; margin-top: 0; }
.edit-panel.show, .checklist-container.show { max-height: 1000px; padding-top: 16px; margin-top: 16px; }
.panel-content { padding: 16px; background-color: var(--bg-primary); border-radius: var(--radius); border-top: 1px solid var(--border-color); }
.fotos-enviadas-status { text-align: center; color: var(--text-dark); font-weight: 500; padding: 10px; background-color: var(--bg-secondary); border-radius: var(--radius); }
.progress-bar-container { width: 100%; background-color: var(--bg-primary); border-radius: 4px; height: 8px; margin-top: 8px; overflow: hidden; }
.progress-bar { height: 100%; background-color: var(--button-success); width: 0; transition: width .5s ease; }

/* Checklist */
.checklist-item { display: flex; align-items: center; margin-bottom: 12px; font-size: 14px; }
.checklist-item input[type=checkbox] { width: 18px; height: 18px; margin-right: 12px; cursor: pointer; accent-color: var(--accent-color); }
.checklist-item label { margin: 0; font-weight: 400; color: var(--text-dark); cursor: pointer; }

/* Tela Exportar */
#saida { width: 100%; height: 35vh; border: 2px dashed var(--border-color); border-radius: var(--radius); padding: 16px; background: var(--bg-secondary); color: var(--text-dark); font-size: 13px; line-height: 1.4; margin-bottom: 24px; }
.actions-button { padding: 14px 20px; border: 0; border-radius: var(--radius); cursor: pointer; font-weight: 600; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; color: #fff; width: 100%; }
.actions { display: grid; gap: 12px; margin-top: 18px; }

/* Toast (Notificação) */
.toast { position: fixed; left: 50%; bottom: 80px; transform: translateX(-50%); background: rgba(44, 62, 80, .9); backdrop-filter: blur(5px); color: #fff; padding: 14px 22px; border-radius: 12px; display: none; font-size: 14px; z-index: 10002; animation: toastIn .3s ease; text-align: center; }
.empty-state { text-align: center; color: var(--text-light); padding: 40px 0; }

/* Preview de Imagem */
.modal-preview { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,.9); justify-content: center; align-items: center; }
.modal-preview-conteudo { max-width: 90%; max-height: 80%; object-fit: contain; }
.modal-preview-fechar { position: fixed; top: 20px; right: 20px; color: #fff; font-size: 36px; background: rgba(0,0,0,.5); border-radius: 50%; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background .2s; border: none; }
.modal-preview-nav { position: fixed; top: 50%; transform: translateY(-50%); width: 100%; display: flex; justify-content: space-between; padding: 0 10px; pointer-events: none; }
.modal-preview-nav button { background: rgba(0,0,0,.5); color: #fff; border: none; padding: 10px; font-size: 24px; cursor: pointer; border-radius: 50%; width: 44px; height: 44px; transition: background .2s; pointer-events: all; }
.modal-preview-bottom { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; align-items: center; }
.modal-preview-action { background: var(--accent-color); color: #fff; border: none; padding: 12px 24px; font-size: 16px; cursor: pointer; border-radius: var(--radius); display: flex; align-items: center; gap: 8px; }
.modal-preview-action.delete { background: var(--button-danger); }

/* Modal de Confirmação Específico */
#confirm-modal .modal-content { max-width: 380px; height: auto; padding: 24px; text-align: center; }
#confirm-title { font-size: 20px; font-weight: 700; color: var(--text-dark); margin-bottom: 8px; }
#confirm-message { color: var(--text-light); margin-bottom: 24px; line-height: 1.5; }
.confirm-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

/* Layout Desktop */
.sidebar { display: none; }
@media (min-width: 900px) {
    html, body { overflow: visible; }
    .app-container { max-width: 100%; height: 100vh; display: none; flex-direction: row; }
    .tab-bar { display: none; }
    .sidebar { display: flex; flex-direction: column; width: 250px; flex-shrink: 0; background-color: var(--bg-secondary); border-right: 1px solid var(--border-color); }
    .sidebar-header { display: flex; align-items: center; height: 70px; min-height: 70px; padding: 0 24px; font-size: 22px; font-weight: 700; border-bottom: 1px solid var(--border-color); color: var(--text-dark); }
    .sidebar-nav { list-style: none; padding: 0; margin: 16px 0; }
    .sidebar-item { display: flex; align-items: center; gap: 16px; padding: 14px 24px; text-decoration: none; color: var(--text-light); font-weight: 600; cursor: pointer; border-left: 4px solid transparent; transition: all .2s ease-in-out; }
    .sidebar-item:hover { background-color: var(--bg-primary); color: var(--text-dark); }
    .sidebar-item.active { color: var(--accent-color); border-left-color: var(--accent-color); background-color: var(--bg-primary); }
    .sidebar-item i, .sidebar-item svg { font-size: 20px; width: 24px; text-align: center; }
    .main-content .header { min-height: 70px; }
    .main-content .header-title { font-size: 22px; }
    .app-screen { padding: 24px 32px; }
    #screen-add .card { max-width: none; margin: 0; }
    .nota-list { display: block; }
    .nota-item { margin-bottom: 16px; }
    .modal-content { max-width: 580px; height: auto; max-height: 90vh; box-shadow: 0 10px 40px rgba(0, 0, 0, .2); }
}
